<!-- Copiază tot acest bloc în widget-ul HTML din Elementor (acolo unde ai deja iframe-ul). -->

<div style="position: relative; width: 100%; height: 100%; min-height: 100vh;">
  <iframe
    id="trust-embed-iframe"
    src="https://andricanuta.github.io/a-moment-of-trust/"
    class="trust-embed-iframe"
    style="position: absolute; top: 0; left: 0; bottom:0; width: 100%; height: 100%; min-height: 100vh; border: none; display: block;"
    title="A Moment of Trust"
  ></iframe>
</div>

<script>
(function() {
  // 1) Link share: dacă URL-ul paginii are #letter-xxx, pasează hash-ul în iframe ca scrisoarea să se deschidă
  function applyLetterHash() {
    var hash = window.location.hash;
    if (!hash || hash.indexOf('#letter-') !== 0) return;
    var iframe = document.querySelector('.trust-embed-iframe');
    if (iframe && iframe.src) {
      var base = iframe.src.split('#')[0];
      iframe.src = base + hash;
    }
  }

  document.addEventListener('DOMContentLoaded', function() {
    applyLetterHash();

    // 2) Overlay: buton închidere
    var btn = document.getElementById('close-sticky-overlay');
    var container = document.getElementById('sticky-overlay');
    if (btn && container) {
      btn.addEventListener('click', function(e) {
        e.preventDefault();
        container.style.display = 'none';
      });
    }
  });

  // La schimbarea hash-ului în URL (ex. user dă Back/Forward) actualizează iframe-ul
  window.addEventListener('hashchange', applyLetterHash);
})();
</script>
